let v;function b(e){return{lang:e?.lang??v?.lang,message:e?.message,abortEarly:e?.abortEarly??v?.abortEarly,abortPipeEarly:e?.abortPipeEarly??v?.abortPipeEarly}}let E;function x(e){return E?.get(e)}let S;function j(e){return S?.get(e)}let P;function w(e,r){return P?.get(e)?.get(r)}function A(e){const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":r}function f(e,r,t,s,n){const i=n&&"input"in n?n.input:t.value,u=n?.expected??e.expects??null,a=n?.received??A(i),l={kind:e.kind,type:e.type,input:i,expected:u,received:a,message:`Invalid ${r}: ${u?`Expected ${u} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:n?.path,issues:n?.issues,lang:s.lang,abortEarly:s.abortEarly,abortPipeEarly:s.abortPipeEarly},o=e.kind==="schema",c=n?.message??e.message??w(e.reference,l.lang)??(o?j(l.lang):null)??s.message??x(l.lang);c!==void 0&&(l.message=typeof c=="function"?c(l):c),o&&(t.typed=!1),t.issues?t.issues.push(l):t.issues=[l]}function p(e){return{version:1,vendor:"valibot",validate(r){return e["~run"]({value:r},b())}}}var I=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function _(e,r,t){return typeof e.fallback=="function"?e.fallback(r,t):e.fallback}function m(e,r,t){return typeof e.default=="function"?e.default(r,t):e.default}function d(e,r){return{kind:"schema",type:"array",reference:d,expects:"Array",async:!1,item:e,message:r,get"~standard"(){return p(this)},"~run"(t,s){const n=t.value;if(Array.isArray(n)){t.typed=!0,t.value=[];for(let i=0;i<n.length;i++){const u=n[i],a=this.item["~run"]({value:u},s);if(a.issues){const l={type:"array",origin:"value",input:n,key:i,value:u};for(const o of a.issues)o.path?o.path.unshift(l):o.path=[l],t.issues?.push(o);if(t.issues||(t.issues=a.issues),s.abortEarly){t.typed=!1;break}}a.typed||(t.typed=!1),t.value.push(a.value)}}else f(this,"type",t,s);return t}}}function h(e){return{kind:"schema",type:"number",reference:h,expects:"number",async:!1,message:e,get"~standard"(){return p(this)},"~run"(r,t){return typeof r.value=="number"&&!isNaN(r.value)?r.typed=!0:f(this,"type",r,t),r}}}function g(e,r){return{kind:"schema",type:"object",reference:g,expects:"Object",async:!1,entries:e,message:r,get"~standard"(){return p(this)},"~run"(t,s){const n=t.value;if(n&&typeof n=="object"){t.typed=!0,t.value={};for(const i in this.entries){const u=this.entries[i];if(i in n||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){const a=i in n?n[i]:m(u),l=u["~run"]({value:a},s);if(l.issues){const o={type:"object",origin:"value",input:n,key:i,value:a};for(const c of l.issues)c.path?c.path.unshift(o):c.path=[o],t.issues?.push(c);if(t.issues||(t.issues=l.issues),s.abortEarly){t.typed=!1;break}}l.typed||(t.typed=!1),t.value[i]=l.value}else if(u.fallback!==void 0)t.value[i]=_(u);else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(f(this,"key",t,s,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:n,key:i,value:n[i]}]}),s.abortEarly))break}}else f(this,"type",t,s);return t}}}function k(e,r){return{kind:"schema",type:"optional",reference:k,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:r,get"~standard"(){return p(this)},"~run"(t,s){return t.value===void 0&&(this.default!==void 0&&(t.value=m(this,t,s)),t.value===void 0)?(t.typed=!0,t):this.wrapped["~run"](t,s)}}}function y(e){return{kind:"schema",type:"string",reference:y,expects:"string",async:!1,message:e,get"~standard"(){return p(this)},"~run"(r,t){return typeof r.value=="string"?r.typed=!0:f(this,"type",r,t),r}}}function C(e,r,t){const s=e["~run"]({value:r},b(t));if(s.issues)throw new I(s.issues);return s.value}const q=g({id:h(),name:y(),email:y()}),D=d(q),O=g({tenantDisplay:y(),clientCount:k(h())}),M="/api";async function N(e,r,t){const s=await fetch(r,{credentials:"include",...t});if(!s.ok){let i=`Request failed (${s.status})`;try{const u=await s.text();if(u.trim())try{const a=JSON.parse(u);typeof a?.detail=="string"&&a.detail.trim()?i=a.detail:typeof a?.title=="string"&&a.title.trim()&&(i=a.title)}catch{i=u}}catch{}throw new Error(i)}const n=await s.json();return C(e,n)}export{M as A,D as C,O as T,C as p,N as r};
